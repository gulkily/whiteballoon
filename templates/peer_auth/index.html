{% extends "base.html" %}

{% block title %}Peer Authentication Â· WhiteBalloon{% endblock %}

{% block nav %}
  {% include "partials/account_nav.html" %}
{% endblock %}

{% block content %}
<section class="section stack" data-page="peer-auth">
  <header class="stack">
    <p class="muted small-text">Reviewer access</p>
    <h1>Peer authentication queue</h1>
    <p class="muted">Approve or deny half-authenticated sessions after confirming the 6-digit code with the requester via an out-of-band channel.</p>
  </header>

  <div class="card stack" data-section="peer-auth">
    {% if not feature_peer_auth_queue %}
      <div class="peer-auth-alert peer-auth-alert--error">Peer authentication queue is disabled by admins.</div>
    {% endif %}
    {% if peer_auth_status_message %}
      <div class="peer-auth-alert peer-auth-alert--success">{{ peer_auth_status_message }}</div>
    {% elif peer_auth_error_message %}
      <div class="peer-auth-alert peer-auth-alert--error">{{ peer_auth_error_message }}</div>
    {% endif %}
    <div class="peer-auth-meta">
      <p class="muted small-text">Awaiting review</p>
      <p class="peer-auth-meta__value" data-peer-auth-count-value>{{ peer_auth_pending_count }}</p>
    </div>

    <div data-peer-auth-list>
      {% include "peer_auth/partials/list.html" %}
    </div>
  </div>
</section>
<script src="/static/js/peer-auth-queue.js" defer></script>
{% endblock %}
